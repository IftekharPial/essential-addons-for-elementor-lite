function browserSniff(){navigator.appVersion;var e,n,t,o=navigator.userAgent,r=navigator.appName,i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(r="IE",i="11;"):-1!==(n=o.indexOf("MSIE"))?(r="IE",i=o.substring(n+5)):-1!==(n=o.indexOf("Chrome"))?(r="Chrome",i=o.substring(n+7)):-1!==(n=o.indexOf("Safari"))?(r="Safari",i=o.substring(n+7),-1!==(n=o.indexOf("Version"))&&(i=o.substring(n+8))):-1!==(n=o.indexOf("Firefox"))?(r="Firefox",i=o.substring(n+8)):(e=o.lastIndexOf(" ")+1)<(n=o.lastIndexOf("/"))&&(r=o.substring(e,n),i=o.substring(n+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),s=parseInt(""+i,10),isNaN(s)&&(i=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),[r,s]}!function(){function n(e){return new RegExp("(^| )"+e+"( |$)")}function e(e,n,t){for(var o=0;o<e.length;o++)n.call(t,e[o])}function t(e){this.element=e}t.prototype={add:function(){e(arguments,function(e){this.contains(e)||(this.element.className+=" "+e)},this)},remove:function(){e(arguments,function(e){this.element.className=this.element.className.replace(n(e),"")},this)},toggle:function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},contains:function(e){return n(e).test(this.element.className)},replace:function(e,n){this.remove(e),this.add(n)}},"classList"in Element.prototype||Object.defineProperty(Element.prototype,"classList",{get:function(){return new t(this)}}),window.DOMTokenList&&null==DOMTokenList.prototype.replace&&(DOMTokenList.prototype.replace=t.prototype.replace)}(),function(){if("function"==typeof NodeList.prototype.forEach)return;NodeList.prototype.forEach=Array.prototype.forEach}();var obj={};obj.browserInfo=browserSniff(),obj.browserName=obj.browserInfo[0],obj.browserVersion=obj.browserInfo[1],wrapPlayers();var players=document.querySelectorAll(".ckin__player"),iconPlay='<i class="ckin-play"></i>',iconPause='<i class="ckin-pause"></i>',iconVolumeMute='<i class="ckin-volume-mute"></i>',iconVolumeMedium='<i class="ckin-volume-medium"></i>',iconVolumeLow='<i class="ckin-volume-low"></i>',iconExpand='<i class="ckin-expand"></i>',iconCompress='<i class="ckin-compress"></i>';function showControls(e){e.setAttribute("controls","controls")}function togglePlay(e,n){e[e.paused?"play":"pause"](),e.paused?n.classList.remove("is-playing"):n.classList.add("is-playing")}function updateButton(e,n){var t=e.paused?iconPlay:iconPause;n.forEach(function(e){return e.innerHTML=t})}function skip(){video.currentTime+=parseFloat(this.dataset.skip)}function toggleVolume(e,n){var t=e.volume,o=iconVolumeMedium;o=1==t?(t=0,iconVolumeMute):.5==t?(t=1,iconVolumeMedium):(t=.5,iconVolumeLow),e.volume=t,n.innerHTML=o}function handleRangeUpdate(){video[this.name]=this.value}function handleProgress(e,n){var t=e.currentTime/e.duration*100;n.style.flexBasis=t+"%"}function scrub(e,n,t){var o=e.offsetX/t.offsetWidth*n.duration;n.currentTime=o}function wrapPlayers(){document.querySelectorAll("video").forEach(function(e){var n=document.createElement("div");n.classList.add("ckin__player"),e.parentNode.insertBefore(n,e),n.appendChild(e)})}function buildControls(e){var n=[];return n.push('<button class="'+e+'__button--big toggle" title="Toggle Play">'+iconPlay+"</button>"),n.push('<div class="'+e+'__controls ckin__controls">'),n.push('<button class="'+e+'__button toggle" title="Toggle Video">'+iconPlay+"</button>",'<div class="progress">','<div class="progress__filled"></div>',"</div>",'<button class="'+e+'__button volume" title="Volume">'+iconVolumeMedium+"</button>",'<button class="'+e+'__button fullscreen" title="Full Screen">'+iconExpand+"</button>"),n.push("</div>"),n.join("")}function attachSkin(e){return void 0!==e&&""!=e?e:"default"}function showTitle(e,n){return void 0!==n&&""!=n&&'<div class="'+e+'__title">'+n+"</div>"}function addOverlay(e,n){if(1==n)e.classList.add("ckin__overlay");else{if(2!=n)return;e.classList.add("ckin__overlay--2")}}function addColor(e,n){if(void 0!==n&&""!=n){var t=e.querySelectorAll("button");e.querySelector(".progress__filled").style.background=n,t.forEach(function(e){return e.style.color=n})}}function toggleFullScreen(e,n){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(e.classList.remove("ckin__fullscreen"),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),isFullscreen=!1,n.innerHTML=iconExpand):(e.classList.add("ckin__fullscreen"),e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),isFullscreen=!0,n.innerHTML=iconCompress)}function onFullScreen(e,n){null!==document.webkitFullscreenElement||(n.classList.remove("ckin__fullscreen"),n.querySelector(".fullscreen").innerHTML=iconExpand)}function addListenerMulti(e,n,t){for(var o=n.split(" "),r=0,i=o.length;r<i;r++)e.addEventListener(o[r],t,!1)}players.forEach(function(n){var t=n.querySelector("video"),e=attachSkin(t.dataset.ckin);n.classList.add(e);var o=t.dataset.overlay;addOverlay(n,o);var r=showTitle(e,t.dataset.title);r&&n.insertAdjacentHTML("beforeend",r);var i=buildControls(e);n.insertAdjacentHTML("beforeend",i);var s=t.dataset.color;addColor(n,s);var l=n.querySelector("."+e+"__controls"),c=n.querySelector(".progress"),a=n.querySelector(".progress__filled"),u=n.querySelectorAll(".toggle"),d=(n.querySelectorAll("[data-skip]"),n.querySelectorAll("."+e+"__slider"),n.querySelector(".volume")),f=n.querySelector(".fullscreen");"IE"!==obj.browserName||8!==obj.browserVersion&&9!==obj.browserVersion||(showControls(t),l.style.display="none"),t.addEventListener("click",function(){togglePlay(this,n)}),t.addEventListener("play",function(){updateButton(this,u)}),t.addEventListener("pause",function(){updateButton(this,u)}),t.addEventListener("timeupdate",function(){handleProgress(this,a)}),u.forEach(function(e){return e.addEventListener("click",function(){togglePlay(t,n)})}),d.addEventListener("click",function(){toggleVolume(t,d)});var p=!1;c.addEventListener("click",function(e){scrub(e,t,c)}),c.addEventListener("mousemove",function(e){return p&&scrub(e,t,c)}),c.addEventListener("mousedown",function(){return p=!0}),c.addEventListener("mouseup",function(){return p=!1}),f.addEventListener("click",function(e){return toggleFullScreen(n,f)}),addListenerMulti(n,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(e){return onFullScreen(e,n)})});
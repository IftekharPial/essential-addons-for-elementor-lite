var filterableGalleryHandler=function(f,s){var i,l,t,e=f.find(".fg-layout-3-filter-controls").eq(0),a=f.find("#fg-filter-trigger"),r=f.find(".fg-layout-3-search-box"),n=f.find("#fg-search-box-input");if(r.length&&r.on("submit",function(e){e.preventDefault()}),a.on("click",function(){e.toggleClass("open-filters")}).blur(function(){e.toggleClass("open-filters")}),!isEditMode){var g=s(".eael-filter-gallery-container",f),o=g.data("settings"),d=g.data("gallery-items"),u="masonry"==o.grid_style?"masonry":"fitRows",c="yes"==o.gallery_enabled,p=s(".eael-filter-gallery-wrapper").data("layout-mode"),m=s(".eael-filter-gallery-wrapper").data("mfp_caption"),y=g.isotope({itemSelector:".eael-filterable-gallery-item-wrap",layoutMode:u,percentPosition:!0,stagger:30,transitionDuration:o.duration+"ms",filter:function(){var e=s(this),t=!i||e.text().match(i);null==l&&(l="layout_3"!=p?f.find(".eael-filter-gallery-control ul li").first().data("filter"):f.find(".fg-layout-3-filter-controls li").first().data("filter"));var a=!l||e.is(l);return t&&a}});s(".eael-magnific-link",f).magnificPopup({type:"image",gallery:{enabled:c},image:{titleSrc:function(e){if("yes"==m)return s(".fg-item-title",e.el.parents(".eael-filterable-gallery-item-wrap")).html()}}}),s(f).magnificPopup({delegate:".eael-magnific-video-link",type:"iframe"}),f.on("click",".control",function(){var e=s(this);l=s(this).attr("data-filter"),f.find("#fg-filter-trigger > span")&&f.find("#fg-filter-trigger > span").text(e.text()),e.siblings().removeClass("active"),e.addClass("active"),y.isotope()}),n.on("input",function(){var e=s(this);clearTimeout(t),t=setTimeout(function(){i=new RegExp(e.val(),"gi"),y.isotope()},600)}),y.imagesLoaded().progress(function(){y.isotope("layout")}),y.on("arrangeComplete",function(){y.isotope("layout")}),s(window).on("load",function(){y.isotope("layout")}),f.on("click",".eael-gallery-load-more",function(e){e.preventDefault();var t=s(this),a=s(".eael-filter-gallery-container",f).children(".eael-filterable-gallery-item-wrap").length,i=g.data("total-gallery-items"),l=g.data("images-per-page"),r=g.data("nomore-item-text"),n=[];a==i&&(t.html('<div class="no-more-items-text">'+r+"</div>"),setTimeout(function(){t.fadeOut("slow")},600));for(var o=a;o<a+l;o++)n.push(s(d[o])[0]);g.append(n),y.isotope("appended",n),y.imagesLoaded().progress(function(){y.isotope("layout")}),s(".eael-magnific-link",f).magnificPopup({type:"image",gallery:{enabled:c},image:{titleSrc:function(e){if("yes"==m)return s(".fg-item-title",e.el.parents(".eael-filterable-gallery-item-wrap")).html()}}})})}};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/eael-filterable-gallery.default",filterableGalleryHandler)});
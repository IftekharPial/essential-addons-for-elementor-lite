var filterableGalleryHandler=function(f,s){var a,i,t,d,e,g,l,r,n,o,u,c=f.find(".fg-layout-3-filter-controls").eq(0),p=f.find("#fg-filter-trigger"),m=f.find(".fg-layout-3-search-box"),y=f.find("#fg-search-box-input");m.length&&m.on("submit",function(e){e.preventDefault()}),p.on("click",function(){c.toggleClass("open-filters")}).blur(function(){c.toggleClass("open-filters")}),isEditMode||(e=(d=s(".eael-filter-gallery-container",f)).data("settings"),g=d.data("gallery-items"),l="masonry"==e.grid_style?"masonry":"fitRows",r="yes"==e.gallery_enabled,n=s(".eael-filter-gallery-wrapper").data("layout-mode"),o=s(".eael-filter-gallery-wrapper").data("mfp_caption"),u=d.isotope({itemSelector:".eael-filterable-gallery-item-wrap",layoutMode:l,percentPosition:!0,stagger:30,transitionDuration:e.duration+"ms",filter:function(){var e=s(this),t=!a||e.text().match(a);null==i&&(i="layout_3"!=n?f.find(".eael-filter-gallery-control ul li").first().data("filter"):f.find(".fg-layout-3-filter-controls li").first().data("filter"));var l=!i||e.is(i);return t&&l}}),s(f).magnificPopup({delegate:".eael-magnific-link",type:"image",gallery:{enabled:r},image:{titleSrc:function(e){if("yes"==o)return e.el.parents(".gallery-item-caption-over").find(".fg-item-title").html()||e.el.parent(".eael-gallery-grid-item").find(".fg-item-title").html()}}}),f.on("click",".control",function(){var e=s(this);i=s(this).attr("data-filter"),f.find("#fg-filter-trigger > span")&&f.find("#fg-filter-trigger > span").text(e.text()),e.siblings().removeClass("active"),e.addClass("active"),u.isotope()}),y.on("input",function(){var e=s(this);clearTimeout(t),t=setTimeout(function(){a=new RegExp(e.val(),"gi"),u.isotope()},600)}),u.imagesLoaded().progress(function(){u.isotope("layout")}),u.on("arrangeComplete",function(){u.isotope("layout")}),s(window).on("load",function(){u.isotope("layout")}),f.on("click",".eael-gallery-load-more",function(e){e.preventDefault();var t=s(this),l=s(".eael-filter-gallery-container",f).children(".eael-filterable-gallery-item-wrap").length,a=d.data("total-gallery-items"),i=d.data("images-per-page"),r=d.data("nomore-item-text"),n=[];l==a&&(t.html('<div class="no-more-items-text">'+r+"</div>"),setTimeout(function(){t.fadeOut("slow")},600));for(var o=l;o<l+i;o++)n.push(s(g[o])[0]);d.append(n),u.isotope("appended",n),u.imagesLoaded().progress(function(){u.isotope("layout")})}))};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/eael-filterable-gallery.default",filterableGalleryHandler)});
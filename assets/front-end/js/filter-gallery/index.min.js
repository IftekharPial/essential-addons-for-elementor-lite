var filterableGalleryHandler=function(s,f){var i,a,t,e=s.find(".fg-layout-3-filter-controls").eq(0),l=s.find("#fg-filter-trigger"),n=s.find(".fg-layout-3-search-box"),o=s.find("#fg-search-box-input"),r="";if(n.length&&n.on("submit",function(e){e.preventDefault()}),l.on("click",function(){e.toggleClass("open-filters")}).blur(function(){e.toggleClass("open-filters")}),!isEditMode){var g=f(".eael-filter-gallery-container",s),c=g.data("settings"),d=g.data("gallery-items"),p="masonry"==c.grid_style?"masonry":"fitRows",u="yes"==c.gallery_enabled,m=f(".eael-filter-gallery-wrapper").data("layout-mode"),y=f(".eael-filter-gallery-wrapper").data("mfp_caption"),h=g.isotope({itemSelector:".eael-filterable-gallery-item-wrap",layoutMode:p,percentPosition:!0,stagger:30,transitionDuration:c.duration+"ms",filter:function(){var e=f(this),t=!i||e.text().match(i);null==a&&(a="layout_3"!=m?s.find(".eael-filter-gallery-control ul li").first().data("filter"):s.find(".fg-layout-3-filter-controls li").first().data("filter"));var l=!a||e.is(a);return t&&l}});f("#eael-filter-gallery-wrapper-"+c.widget_id+" .eael-magnific-link").magnificPopup({type:"image",gallery:{enabled:u},callbacks:{close:function(){f("#elementor-lightbox-slideshow-single-img").css("display","none")}},fixedContentPos:!1,image:{titleSrc:function(e){if("yes"==y)return e.el.parent().prev().prev().html()}}}),s.on("click",".control",function(){var e=f(this);a=f(this).attr("data-filter"),r=f(this).attr("data-filter")+" a.eael-magnific-link",s.find("#fg-filter-trigger > span")&&s.find("#fg-filter-trigger > span").text(e.text()),e.siblings().removeClass("active"),e.addClass("active"),f("#eael-filter-gallery-wrapper-"+c.widget_id+" "+r).magnificPopup({type:"image",gallery:{enabled:u},callbacks:{close:function(){f("#elementor-lightbox-slideshow-single-img").css("display","none")}},fixedContentPos:!1,image:{titleSrc:function(e){if("yes"==y)return e.el.parent().prev().prev().html()}}}),h.isotope()}),o.on("input",function(){var e=f(this);clearTimeout(t),t=setTimeout(function(){i=new RegExp(e.val(),"gi"),h.isotope()},600)}),h.imagesLoaded().progress(function(){h.isotope("layout")}),h.on("arrangeComplete",function(){h.isotope("layout")}),f(window).on("load",function(){h.isotope("layout")}),f(s).magnificPopup({delegate:".eael-magnific-video-link",type:"iframe",callbacks:{close:function(){f("#elementor-lightbox").hide()}}}),s.on("click",".eael-gallery-load-more",function(e){e.preventDefault();var t=f(this),l=f(".eael-filter-gallery-container",s).children(".eael-filterable-gallery-item-wrap").length,i=g.data("total-gallery-items"),a=g.data("images-per-page"),n=g.data("nomore-item-text"),o=[];l==i&&(t.html('<div class="no-more-items-text">'+n+"</div>"),setTimeout(function(){t.fadeOut("slow")},600));for(var r=l;r<l+a;r++)o.push(f(d[r])[0]);g.append(o),h.isotope("appended",o),h.imagesLoaded().progress(function(){h.isotope("layout")}),f(".eael-magnific-link",s).magnificPopup({type:"image",gallery:{enabled:u},callbacks:{close:function(){f("#elementor-lightbox").hide()}}})})}};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/eael-filterable-gallery.default",filterableGalleryHandler)});
var eaelsvPosition="",eaelsvWidth=0,eaelsvHeight=0,eaelsvDomHeight=0,videoIsActive="off",eaelMakeItSticky=0,scrollHeight=0;function GetDomElementHeight(e){var t=jQuery(e).parent().height(),i=scrollHeight*t/100;return jQuery(e).parent().offset().top+i}function PositionStickyPlayer(e,t,i){"top-left"==e&&(jQuery(".eael-sticky-video-player2.out").css("top","40px"),jQuery(".eael-sticky-video-player2.out").css("left","40px")),"top-right"==e&&(jQuery(".eael-sticky-video-player2.out").css("top","40px"),jQuery(".eael-sticky-video-player2.out").css("right","40px")),"bottom-right"==e&&(jQuery(".eael-sticky-video-player2.out").css("bottom","40px"),jQuery(".eael-sticky-video-player2.out").css("right","40px")),"bottom-left"==e&&(jQuery(".eael-sticky-video-player2.out").css("bottom","40px"),jQuery(".eael-sticky-video-player2.out").css("left","40px")),jQuery(".eael-sticky-video-player2.out").css("width",i+"px"),jQuery(".eael-sticky-video-player2.out").css("height",t+"px")}function PlayerPlay(e,t){e.on("play",function(e){eaelsvDomHeight=GetDomElementHeight(t),jQuery(".eael-sticky-video-player2").removeAttr("id"),jQuery(".eael-sticky-video-player2").removeClass("out"),t.attr("id","videobox"),videoIsActive="on",eaelsvPosition=t.data("position"),eaelsvHeight=t.data("sheight"),eaelsvWidth=t.data("swidth")})}function RunStickyPlayer(e){new Plyr("#"+e).start()}jQuery(window).on("elementor/frontend/init",function(){isEditMode&&elementor.hooks.addAction("panel/open_editor/widget/eael-sticky-video",function(t,i,e){var o;i.attributes.settings.on("change:eaelsv_sticky_width",function(){clearTimeout(o),o=setTimeout(function(){var e=Math.ceil(i.getSetting("eaelsv_sticky_width")/1.78);i.attributes.settings.attributes.eaelsv_sticky_height=e,t.el.querySelector('[data-setting="eaelsv_sticky_height"]').value=e},250)}),i.attributes.settings.on("change:eaelsv_sticky_height",function(){clearTimeout(o),o=setTimeout(function(){var e=Math.ceil(1.78*i.getSetting("eaelsv_sticky_height"));i.attributes.settings.attributes.eaelsv_sticky_width=e,t.el.querySelector('[data-setting="eaelsv_sticky_width"]').value=e},250)})}),elementorFrontend.hooks.addAction("frontend/element_ready/eael-sticky-video.default",function(e,t){t(".eaelsv-sticky-player-close",e).hide();var i,o=e.find(".eael-sticky-video-player2"),s=o.data("sticky"),a=o.data("autoplay");eaelsvPosition=o.data("position"),eaelsvHeight=o.data("sheight"),eaelsvWidth=o.data("swidth"),i=o.data("overlay"),scrollHeight=o.data("scroll_height"),PositionStickyPlayer(eaelsvPosition,eaelsvHeight,eaelsvWidth);var l,r=new Plyr("#eaelsv-player-"+e.data("id"));"no"===i&&"yes"===a&&"yes"===s&&(eaelsvDomHeight=GetDomElementHeight(o),o.attr("id","videobox"),videoIsActive="on",PlayerPlay(r,o)),"yes"===i&&(l=o.prev(),videoIsActive="off",t(l).on("click",function(){t(this).css("display","none"),"yes"===t(this).next().data("autoplay")&&(r.restart(),eaelsvDomHeight=GetDomElementHeight(this),"yes"===s&&(t(this).next().attr("id","videobox"),videoIsActive="on"))})),r.on("pause",function(e){videoIsActive="off"}),r.on("play",function(e){videoIsActive="on"}),t(".eaelsv-sticky-player-close").on("click",function(){o.removeClass("out").addClass("in"),t(".eael-sticky-video-player2").removeAttr("style"),videoIsActive="off"}),o.parent().css("height",o.height()+"px"),t(window).resize(function(){o.parent().css("height",o.height()+"px")})})}),jQuery(window).scroll(function(){var e=jQuery(window).scrollTop();jQuery(document).height()-e>jQuery(window).height()+400&&(eaelsvDomHeight<=e?"on"==videoIsActive&&(jQuery("#videobox").find(".eaelsv-sticky-player-close").css("display","block"),jQuery("#videobox").removeClass("in").addClass("out"),PositionStickyPlayer(eaelsvPosition,eaelsvHeight,eaelsvWidth)):(jQuery(".eaelsv-sticky-player-close").hide(),jQuery("#videobox").removeClass("out").addClass("in"),jQuery(".eael-sticky-video-player2").removeAttr("style")))});
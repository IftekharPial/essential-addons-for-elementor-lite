var advanced_data_table_drag_start_x,advanced_data_table_drag_start_width,advanced_data_table_drag_el,advanced_data_table_active_cell=null,advanced_data_table_dragging=!1,Advanced_Data_Table=function(e,a){var _=e.context.querySelector(".ea-advanced-data-table"),t=e.context.querySelector(".ea-advanced-data-table-search"),v={};if(isEditMode)_.classList.add("ea-advanced-data-table-editable"),_.querySelectorAll("th, td").forEach(function(e){var a=e.innerHTML;0!==a.indexOf('<textarea rows="1">')&&(e.innerHTML='<textarea rows="1">'+a+"</textarea>")}),_.addEventListener("mousedown",function(e){"th"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),advanced_data_table_dragging=!0,advanced_data_table_drag_el=e.target,advanced_data_table_drag_start_x=e.pageX,advanced_data_table_drag_start_width=e.target.offsetWidth)}),document.addEventListener("mousemove",function(e){advanced_data_table_dragging&&(advanced_data_table_drag_el.style.width=advanced_data_table_drag_start_width+(event.pageX-advanced_data_table_drag_start_x)+"px")}),document.addEventListener("mouseup",function(e){advanced_data_table_dragging=advanced_data_table_dragging&&!1});else if(t&&t.addEventListener("input",function(e){var a=this.value.toLowerCase(),t=0<_.parentNode.querySelector(".ea-advanced-data-table-pagination").querySelectorAll(".ea-advanced-data-table-pagination-current").length;if(1<_.rows.length)if(0<a.length){_.parentNode.querySelector(".ea-advanced-data-table-pagination").style.display="none";for(var n=1;n<_.rows.length;n++){var d=!1;if(0<_.rows[n].cells.length)for(var r=0;r<_.rows[n].cells.length;r++)if(-1<_.rows[n].cells[r].textContent.toLowerCase().indexOf(a)){d=!0;break}_.rows[n].style.display=d?"table-row":"none"}}else if(_.parentNode.querySelector(".ea-advanced-data-table-pagination").style.display="",t){var l=_.parentNode.querySelector(".ea-advanced-data-table-pagination-current").dataset.page,o=(l-1)*_.dataset.itemsPerPage+1,c=l*_.dataset.itemsPerPage;for(n=1;n<=_.rows.length-1;n++)_.rows[n].style.display=o<=n&&n<=c?"table-row":"none"}else for(n=1;n<=_.rows.length-1;n++)_.rows[n].style.display="table-row"}),_.addEventListener("click",function(e){if("th"===e.target.tagName.toLowerCase()){var a=e.target.cellIndex,t=e.target.classList.toggle("desc"),n=!0,d=0<_.parentNode.querySelector(".ea-advanced-data-table-pagination").querySelectorAll(".ea-advanced-data-table-pagination-current").length,r=1,l=1,o=_.rows.length-1;for(d&&(l=((r=_.parentNode.querySelector(".ea-advanced-data-table-pagination-current").dataset.page)-1)*_.dataset.itemsPerPage+1,o=o-(r-1)*_.dataset.itemsPerPage>=_.dataset.itemsPerPage?r*_.dataset.itemsPerPage:o),v[r]=[],_.querySelectorAll("th").forEach(function(e){v[r].push(e.classList.contains("desc"))});n;){n=!1;for(var c=l;c<o;c++){var i=_.rows[c].cells[a],s=_.rows[c+1].cells[a];if(s=isNaN(parseInt(i.innerHTML))||isNaN(parseInt(s.innerHTML))?(i=i.innerHTML.toLowerCase(),s.innerHTML.toLowerCase()):(i=parseInt(i.innerHTML),parseInt(s.innerHTML)),!0===t&&i<s){_.rows[c].parentNode.insertBefore(_.rows[c+1],_.rows[c]),n=!0;break}if(!1===t&&s<i){_.rows[c].parentNode.insertBefore(_.rows[c+1],_.rows[c]),n=!0;break}}}}}),_.classList.contains("ea-advanced-data-table-paginated")){var n=_.parentNode.querySelector(".ea-advanced-data-table-pagination"),d="",r=1,l=1,o=r*_.dataset.itemsPerPage,c=Math.ceil((_.rows.length-1)/_.dataset.itemsPerPage);if(1<c){for(var i=1;i<=c;i++)d+='<a href="#" data-page="'+i+'" class="'+(1==i?"ea-advanced-data-table-pagination-current":"")+'">'+i+"</a>";n.insertAdjacentHTML("beforeend",'<a href="#" data-page="1">&laquo;</a>'+d+'<a href="#" data-page="'+c+'">&raquo;</a>')}for(i=1;i<=o&&!(i>=_.rows.length);i++)_.rows[i].style.display="table-row";n.addEventListener("click",function(e){if(e.preventDefault(),"a"==e.target.tagName.toLowerCase()){r=e.target.dataset.page,l=(r-1)*_.dataset.itemsPerPage+1,o=r*_.dataset.itemsPerPage,n.querySelectorAll(".ea-advanced-data-table-pagination-current").forEach(function(e){e.classList.remove("ea-advanced-data-table-pagination-current")}),n.querySelectorAll('[data-page="'+r+'"]').forEach(function(e){e.classList.add("ea-advanced-data-table-pagination-current")});for(var a=1;a<=_.rows.length-1;a++)_.rows[a].style.display=l<=a&&a<=o?"table-row":"none";_.querySelectorAll("th").forEach(function(e,a){e.classList.remove("desc"),void 0!==v[r]&&v[r][a]&&e.classList.add("desc")})}})}},Advanced_Data_Table_Inline_Edit=function(e,d,a){function t(){var e=setInterval(function(){if(a.el.querySelector(".ea-advanced-data-table")){var t,n=a.el.querySelector(".ea-advanced-data-table");n.addEventListener("focusin",function(e){"textarea"==e.target.tagName.toLowerCase()&&(advanced_data_table_active_cell=e.target)}),n.addEventListener("input",function(e){if("textarea"==e.target.tagName.toLowerCase()){clearTimeout(t);var a=n.cloneNode(!0);a.querySelectorAll("th, td").forEach(function(e){var a=e.querySelector("textarea").value;e.innerHTML=a}),d.remoteRender=!1,d.setSetting("ea_adv_data_table_static_html",a.innerHTML),t=setTimeout(function(){d.remoteRender=!0},1001)}}),n.addEventListener("mouseup",function(e){if("th"===e.target.tagName.toLowerCase()){clearTimeout(t);var a=n.cloneNode(!0);a.querySelectorAll("th, td").forEach(function(e){var a=e.querySelector("textarea").value;e.innerHTML=a}),d.remoteRender=!1,d.setSetting("ea_adv_data_table_static_html",a.innerHTML),t=setTimeout(function(){d.remoteRender=!0},1001)}}),n.addEventListener("dblclick",function(e){"th"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),e.target.style.width="")}),clearInterval(e)}},10)}t(),d.on("remote:render",function(){t()})};Advanced_Data_Table_Context_Menu=function(e,d){return"eael-advanced-data-table"==d.options.model.attributes.widgetType&&e.push({name:"ea_advanced_data_table",actions:[{name:"add_row_above",title:"Add Row Above",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell&&"th"!=advanced_data_table_active_cell.parentNode.tagName.toLowerCase()){for(var a=advanced_data_table_active_cell.parentNode.parentNode.rowIndex,t=e.insertRow(a),n=0;n<e.rows[0].cells.length;n++){t.insertCell(n).innerHTML='<textarea rows="1"></textarea>'}advanced_data_table_active_cell=null}}},{name:"add_row_below",title:"Add Row Below",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell){for(var a=advanced_data_table_active_cell.parentNode.parentNode.rowIndex+1,t=e.insertRow(a),n=0;n<e.rows[0].cells.length;n++){t.insertCell(n).innerHTML='<textarea rows="1"></textarea>'}advanced_data_table_active_cell=null}}},{name:"add_column_left",title:"Add Column Left",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell){for(var a=advanced_data_table_active_cell.parentNode.cellIndex,t=0;t<e.rows.length;t++){if("th"==e.rows[t].cells[0].tagName.toLowerCase())var n=e.rows[t].insertBefore(document.createElement("th"),e.rows[t].cells[a]);else n=e.rows[t].insertCell(a);n.innerHTML='<textarea rows="1"></textarea>'}advanced_data_table_active_cell=null}}},{name:"add_column_right",title:"Add Column Right",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell){for(var a=advanced_data_table_active_cell.parentNode.cellIndex+1,t=0;t<e.rows.length;t++){if("th"==e.rows[t].cells[0].tagName.toLowerCase())var n=e.rows[t].insertBefore(document.createElement("th"),e.rows[t].cells[a]);else n=e.rows[t].insertCell(a);n.innerHTML='<textarea rows="1"></textarea>'}advanced_data_table_active_cell=null}}},{name:"delete_row",title:"Delete Row",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell){var a=advanced_data_table_active_cell.parentNode.parentNode.rowIndex;e.deleteRow(a),advanced_data_table_active_cell=null}}},{name:"delete_column",title:"Delete Column",callback:function(){var e=document.querySelector(".ea-advanced-data-table-"+d.options.model.attributes.id);if(null!==advanced_data_table_active_cell){for(var a=advanced_data_table_active_cell.parentNode.cellIndex,t=0;t<e.rows.length;t++)e.rows[t].deleteCell(a);advanced_data_table_active_cell=null}}}]}),e},jQuery(window).on("elementor/frontend/init",function(){isEditMode&&(elementor.hooks.addFilter("elements/widget/contextMenuGroups",Advanced_Data_Table_Context_Menu),elementor.hooks.addAction("panel/open_editor/widget/eael-advanced-data-table",Advanced_Data_Table_Inline_Edit)),elementorFrontend.hooks.addAction("frontend/element_ready/eael-advanced-data-table.default",Advanced_Data_Table)});